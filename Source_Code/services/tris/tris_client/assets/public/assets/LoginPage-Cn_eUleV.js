import{d as y,o as j,r as p,c as U,w as a,u as e,a as C,b as k,e as l,E as N,j as _,k as i,l as f,m,i as g,x as z,C as h,y as I,t as B,v as L,z as R,A as T,_ as P}from"./index-C6DMi5pG.js";const A="/Train_Icon_Small.png",V=c=>(R("data-v-c7fc3bf9"),c=c(),T(),c),q=V(()=>g("h1",null,"TRIS",-1)),D=V(()=>g("img",{src:A},null,-1)),E={class:"error"},G=y({__name:"LoginPage",setup(c){j(()=>{window.jwt=""});const v=C();let r=p(""),u=p(""),d=p(""),s=p(window.server);const b=w=>{if(r.value="",u.value.length==0&&d.value.length==0)return r.value="No fields can be empty, please use the guest login",!1;let t={name:u.value,password:d.value},o="".concat(s.value,"/login").concat(JSON.stringify(t)),S=window.signRequest(o);fetch("".concat(s.value,"/login"),{method:"post",headers:{Accept:"application/json","X-Signature":S,"Content-Type":"application/json",Authorization:window.jwt},body:JSON.stringify(t)}).then(n=>n.json()).then(n=>{n.error!==void 0?r.value=n.error:(window.server=s.value,window.jwt=n.jwt,v.push("/overview"))}).catch(n=>{r.value=n.message})},x=w=>{r.value="",window.server=s.value,v.push("/overview")};return(w,t)=>(k(),U(e(L),null,{default:a(()=>[l(e(B),{fullscreen:!0,color:"light",class:"ion-padding"},{default:a(()=>[l(e(N),{class:"txtcenter",size:"large"},{default:a(()=>[q]),_:1}),D,l(e(_),{inset:!0},{default:a(()=>[l(e(i),null,{default:a(()=>[l(e(f),{required:"true",label:"Server","label-placement":"fixed",name:"server",modelValue:e(s),"onUpdate:modelValue":t[0]||(t[0]=o=>m(s)?s.value=o:s=o),placeholder:"Servername"},null,8,["modelValue"])]),_:1}),l(e(i),null,{default:a(()=>[l(e(f),{label:"Username","label-placement":"fixed",name:"user",modelValue:e(u),"onUpdate:modelValue":t[1]||(t[1]=o=>m(u)?u.value=o:u=o),placeholder:"Username"},null,8,["modelValue"])]),_:1}),l(e(i),null,{default:a(()=>[l(e(f),{label:"Password","label-placement":"fixed",name:"password",type:"password",placeholder:"password",modelValue:e(d),"onUpdate:modelValue":t[2]||(t[2]=o=>m(d)?d.value=o:d=o)},null,8,["modelValue"])]),_:1})]),_:1}),l(e(_),{class:"noBackground",lines:"none"},{default:a(()=>[l(e(i),{color:"light"},{default:a(()=>[g("span",E,z(e(r)),1)]),_:1}),l(e(i),{color:"light"},{default:a(()=>[l(e(h),{slot:"start",onClick:b,color:"success",size:"medium"},{default:a(()=>[I("Login")]),_:1}),l(e(h),{slot:"end",onClick:x,color:"ligt",size:"medium"},{default:a(()=>[I("Guest login")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}}),O=P(G,[["__scopeId","data-v-c7fc3bf9"]]);export{O as default};
